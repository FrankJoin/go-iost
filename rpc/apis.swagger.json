{
  "swagger": "2.0",
  "info": {
    "title": "rpc/apis.proto",
    "version": "version not set"
  },
  "schemes": [
    "http",
    "https"
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/execTx": {
      "post": {
        "summary": "not supported yet",
        "operationId": "ExecTx",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/rpcExecTxRes"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/rpcTxReq"
            }
          }
        ],
        "tags": [
          "Apis"
        ]
      }
    },
    "/getAccountInfo/{ID}/{useLongestChain}": {
      "get": {
        "summary": "get the balance of some account by account ID",
        "operationId": "GetAccountInfo",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/rpcGetAccountRes"
            }
          }
        },
        "parameters": [
          {
            "name": "ID",
            "description": "account ID",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "useLongestChain",
            "description": "useLongestChain means whether getting the balance also from pending blocks(in the longest chain)",
            "in": "path",
            "required": true,
            "type": "boolean",
            "format": "boolean"
          }
        ],
        "tags": [
          "Apis"
        ]
      }
    },
    "/getBlockByHash/{hash}/{complete}": {
      "get": {
        "summary": "get the block by hash",
        "operationId": "GetBlockByHash",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/rpcBlockInfo"
            }
          }
        },
        "parameters": [
          {
            "name": "hash",
            "description": "block hash",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "complete",
            "description": "complete means return the whole block or just blockhead+txhash_list",
            "in": "path",
            "required": true,
            "type": "boolean",
            "format": "boolean"
          }
        ],
        "tags": [
          "Apis"
        ]
      }
    },
    "/getBlockByNum/{num}/{complete}": {
      "get": {
        "summary": "get the block by number",
        "operationId": "getBlockByNum",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/rpcBlockInfo"
            }
          }
        },
        "parameters": [
          {
            "name": "num",
            "description": "block number",
            "in": "path",
            "required": true,
            "type": "string",
            "format": "int64"
          },
          {
            "name": "complete",
            "description": "complete means return the whole block or just blockhead+txhash_list",
            "in": "path",
            "required": true,
            "type": "boolean",
            "format": "boolean"
          }
        ],
        "tags": [
          "Apis"
        ]
      }
    },
    "/getChainInfo": {
      "get": {
        "summary": "get the chain info",
        "operationId": "GetChainInfo",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/rpcChainInfoRes"
            }
          }
        },
        "tags": [
          "Apis"
        ]
      }
    },
    "/getContract/{contractID}": {
      "get": {
        "summary": "get contract by cid",
        "operationId": "GetContract",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/rpcGetContractRes"
            }
          }
        },
        "parameters": [
          {
            "name": "contractID",
            "description": "contract id",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "tags": [
          "Apis"
        ]
      }
    },
    "/getContractStorage": {
      "post": {
        "summary": "get the value of the corresponding key in stateDB",
        "operationId": "GetContractStorage",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/rpcGetContractStorageRes"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/rpcGetContractStorageReq"
            }
          }
        ],
        "tags": [
          "Apis"
        ]
      }
    },
    "/getNodeInfo": {
      "get": {
        "summary": "get the version info",
        "operationId": "GetNodeInfo",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/rpcNodeInfoRes"
            }
          }
        },
        "tags": [
          "Apis"
        ]
      }
    },
    "/getTxByHash/{hash}": {
      "get": {
        "summary": "get the tx by hash",
        "operationId": "GetTxByHash",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/rpctxRes"
            }
          }
        },
        "parameters": [
          {
            "name": "hash",
            "description": "transaction hash",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "tags": [
          "Apis"
        ]
      }
    },
    "/getTxReceiptByHash/{hash}": {
      "get": {
        "summary": "get receipt by hash",
        "operationId": "GetTxReceiptByHash",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/rpctxReceiptRes"
            }
          }
        },
        "parameters": [
          {
            "name": "hash",
            "description": "transaction hash",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "tags": [
          "Apis"
        ]
      }
    },
    "/getTxReceiptByTxHash/{hash}": {
      "get": {
        "summary": "get receipt by txhash",
        "operationId": "GetTxReceiptByTxHash",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/rpctxReceiptRes"
            }
          }
        },
        "parameters": [
          {
            "name": "hash",
            "description": "transaction hash",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "tags": [
          "Apis"
        ]
      }
    },
    "/sendTx": {
      "post": {
        "summary": "receive encoded tx",
        "operationId": "SendTx",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/rpcSendTxRes"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/rpcTxReq"
            }
          }
        ],
        "tags": [
          "Apis"
        ]
      }
    },
    "/subscribe": {
      "post": {
        "summary": "subscribe an event",
        "operationId": "Subscribe",
        "responses": {
          "200": {
            "description": "A successful response.(streaming responses)",
            "schema": {
              "$ref": "#/definitions/rpcSubscribeRes"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/rpcSubscribeReq"
            }
          }
        ],
        "tags": [
          "Apis"
        ]
      }
    }
  },
  "definitions": {
    "EventTopic": {
      "type": "string",
      "enum": [
        "ContractReceipt",
        "ContractEvent",
        "TransactionResult",
        "TransactionConfirm",
        "TransactionPending",
        "NewBlock",
        "ProducerState"
      ],
      "default": "ContractReceipt"
    },
    "blockpbBlockHead": {
      "type": "object",
      "properties": {
        "version": {
          "type": "string",
          "format": "int64"
        },
        "parentHash": {
          "type": "string",
          "format": "byte"
        },
        "txsHash": {
          "type": "string",
          "format": "byte"
        },
        "merkleHash": {
          "type": "string",
          "format": "byte"
        },
        "info": {
          "type": "string",
          "format": "byte"
        },
        "number": {
          "type": "string",
          "format": "int64"
        },
        "witness": {
          "type": "string"
        },
        "time": {
          "type": "string",
          "format": "int64"
        },
        "gasUsage": {
          "type": "string",
          "format": "int64"
        }
      }
    },
    "contractABI": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "args": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "amountLimit": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/contractAmount"
          }
        }
      }
    },
    "contractAmount": {
      "type": "object",
      "properties": {
        "token": {
          "type": "string"
        },
        "val": {
          "type": "string"
        }
      }
    },
    "contractContract": {
      "type": "object",
      "properties": {
        "ID": {
          "type": "string"
        },
        "info": {
          "$ref": "#/definitions/contractInfo"
        },
        "code": {
          "type": "string"
        }
      }
    },
    "contractInfo": {
      "type": "object",
      "properties": {
        "lang": {
          "type": "string"
        },
        "version": {
          "type": "string"
        },
        "abi": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/contractABI"
          }
        }
      }
    },
    "eventEvent": {
      "type": "object",
      "properties": {
        "topic": {
          "$ref": "#/definitions/EventTopic"
        },
        "data": {
          "type": "string"
        },
        "time": {
          "type": "string",
          "format": "int64"
        }
      }
    },
    "rpcBlockInfo": {
      "type": "object",
      "properties": {
        "head": {
          "$ref": "#/definitions/blockpbBlockHead",
          "title": "BlockHead"
        },
        "hash": {
          "type": "string",
          "title": "block hash"
        },
        "txs": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/txpbTx"
          },
          "title": "transaction list,works when complete is true"
        },
        "txhash": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "title": "transaction hash list,works when complete is false"
        },
        "receipts": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/txpbTxReceipt"
          },
          "title": "transaction receipt list"
        },
        "receiptHash": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "title": "transaction receiptHash list"
        }
      }
    },
    "rpcChainInfoRes": {
      "type": "object",
      "properties": {
        "netType": {
          "type": "string"
        },
        "protocolVersion": {
          "type": "string"
        },
        "height": {
          "type": "string",
          "format": "int64"
        },
        "witnessList": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "headBlock": {
          "$ref": "#/definitions/rpcBlockInfo",
          "title": "the longest chain block"
        },
        "latestConfirmedBlock": {
          "$ref": "#/definitions/rpcBlockInfo",
          "title": "the latest confirmed block"
        }
      }
    },
    "rpcExecTxRes": {
      "type": "object",
      "properties": {
        "txReceipt": {
          "$ref": "#/definitions/txpbTxReceipt"
        }
      }
    },
    "rpcGASInfo": {
      "type": "object",
      "properties": {
        "currentTotal": {
          "type": "string",
          "title": "these values are all fix point number"
        },
        "increaseSpeed": {
          "type": "string"
        },
        "limit": {
          "type": "string"
        },
        "pledgedCoin": {
          "type": "string"
        }
      }
    },
    "rpcGetAccountRes": {
      "type": "object",
      "properties": {
        "balance": {
          "type": "string",
          "title": "the queried balance"
        },
        "gas": {
          "$ref": "#/definitions/rpcGASInfo",
          "title": "current gas"
        },
        "ram": {
          "$ref": "#/definitions/rpcRAMInfo"
        },
        "accountJson": {
          "type": "string"
        }
      }
    },
    "rpcGetContractRes": {
      "type": "object",
      "properties": {
        "value": {
          "$ref": "#/definitions/contractContract",
          "title": "contract id"
        }
      }
    },
    "rpcGetContractStorageReq": {
      "type": "object",
      "properties": {
        "contractID": {
          "type": "string"
        },
        "owner": {
          "type": "string",
          "title": "ram owner, should be the same as 'put' call. It can be empty"
        },
        "key": {
          "type": "string",
          "title": "the key in the StateDB"
        },
        "field": {
          "type": "string",
          "title": "get the value from StateDB,field is needed if StateDB[key] is a map.(we get StateDB[key][field] in this case)"
        }
      }
    },
    "rpcGetContractStorageRes": {
      "type": "object",
      "properties": {
        "jsonStr": {
          "type": "string",
          "title": "the value of the corresponding key in the StateDB"
        }
      }
    },
    "rpcNetworkInfo": {
      "type": "object",
      "properties": {
        "ID": {
          "type": "string"
        },
        "peerCount": {
          "type": "integer",
          "format": "int32"
        },
        "peerInfo": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/rpcPeerInfo"
          }
        }
      }
    },
    "rpcNodeInfoRes": {
      "type": "object",
      "properties": {
        "buildTime": {
          "type": "string",
          "title": "build time and git hash"
        },
        "gitHash": {
          "type": "string"
        },
        "mode": {
          "type": "string"
        },
        "network": {
          "$ref": "#/definitions/rpcNetworkInfo"
        }
      }
    },
    "rpcPeerInfo": {
      "type": "object",
      "properties": {
        "ID": {
          "type": "string"
        },
        "addr": {
          "type": "string"
        }
      }
    },
    "rpcRAMInfo": {
      "type": "object",
      "properties": {
        "available": {
          "type": "string",
          "format": "int64"
        }
      }
    },
    "rpcSendTxRes": {
      "type": "object",
      "properties": {
        "hash": {
          "type": "string",
          "title": "the hash of the received transaction"
        }
      }
    },
    "rpcSubscribeReq": {
      "type": "object",
      "properties": {
        "topics": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/EventTopic"
          },
          "title": "type of event:0-TransactionResult,1-ContractEvent,2-ContractUserEvent,3-ContractSystemEvent"
        }
      }
    },
    "rpcSubscribeRes": {
      "type": "object",
      "properties": {
        "ev": {
          "$ref": "#/definitions/eventEvent",
          "title": "event"
        }
      }
    },
    "rpcTxReq": {
      "type": "object",
      "properties": {
        "tx": {
          "$ref": "#/definitions/txpbTx"
        }
      }
    },
    "rpctxReceiptRes": {
      "type": "object",
      "properties": {
        "txReceipt": {
          "$ref": "#/definitions/txpbTxReceipt",
          "title": "transaction receipt"
        },
        "hash": {
          "type": "string"
        }
      }
    },
    "rpctxRes": {
      "type": "object",
      "properties": {
        "tx": {
          "$ref": "#/definitions/txpbTx",
          "title": "the queried transaction"
        },
        "hash": {
          "type": "string",
          "title": "transaction hash"
        }
      }
    },
    "sigpbSignature": {
      "type": "object",
      "properties": {
        "algorithm": {
          "type": "integer",
          "format": "int32"
        },
        "sig": {
          "type": "string",
          "format": "byte"
        },
        "pubKey": {
          "type": "string",
          "format": "byte"
        }
      }
    },
    "txpbAction": {
      "type": "object",
      "properties": {
        "contract": {
          "type": "string"
        },
        "actionName": {
          "type": "string"
        },
        "data": {
          "type": "string"
        }
      }
    },
    "txpbReceipt": {
      "type": "object",
      "properties": {
        "funcName": {
          "type": "string"
        },
        "content": {
          "type": "string"
        }
      }
    },
    "txpbStatus": {
      "type": "object",
      "properties": {
        "code": {
          "type": "integer",
          "format": "int32"
        },
        "message": {
          "type": "string"
        }
      }
    },
    "txpbTx": {
      "type": "object",
      "properties": {
        "time": {
          "type": "string",
          "format": "int64"
        },
        "expiration": {
          "type": "string",
          "format": "int64"
        },
        "gasLimit": {
          "type": "string",
          "format": "int64"
        },
        "gasPrice": {
          "type": "string",
          "format": "int64"
        },
        "actions": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/txpbAction"
          }
        },
        "signers": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "signs": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/sigpbSignature"
          }
        },
        "publisher": {
          "type": "string"
        },
        "publishSigns": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/sigpbSignature"
          }
        },
        "delay": {
          "type": "string",
          "format": "int64"
        },
        "referredTx": {
          "type": "string",
          "format": "byte"
        },
        "amountLimit": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/contractAmount"
          }
        }
      }
    },
    "txpbTxReceipt": {
      "type": "object",
      "properties": {
        "txHash": {
          "type": "string",
          "format": "byte"
        },
        "gasUsage": {
          "type": "string",
          "format": "int64"
        },
        "ramUsage": {
          "type": "object",
          "additionalProperties": {
            "type": "string",
            "format": "int64"
          }
        },
        "status": {
          "$ref": "#/definitions/txpbStatus"
        },
        "returns": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "receipts": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/txpbReceipt"
          }
        }
      }
    }
  }
}
